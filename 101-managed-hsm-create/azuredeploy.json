{
   "$schema":"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
   "contentVersion":"1.0.0.0",
   "parameters":{
      "managedHSMName":{
         "type":"string",
         "metadata":{
            "description":"Specifies the name of the Managed HSM."
         }
      },
      "location":{
         "type":"string",
         "metadata":{
            "description":"Specifies the Azure location where the managed hsm should be created."
         },
         "defaultValue":"[resourceGroup().location]"
      },
      "SKU":{
         "type":"Object",
         "metadata":{
            "description":"Specifies the SKU of the managed hsm should be created."
         }
      },
      "initialAdminObjectIds":{
         "type":"array",
         "metadata":{
            "description":"Specifies the objectIDs associated with a list of initial administrators."
         }
      },
      "tenantId":{
         "type":"string",
         "defaultValue":"[subscription().tenantId]",
         "metadata":{
            "description":"Specifies the Azure Active Directory tenant ID that should be used for authenticating requests to the Managed HSM."
         }
      }
   },
   "resources":[
      {
         "type":"Microsoft.KeyVault/managedHSMs",
         "name":"[parameters('managedHSMName')]",
         "location":"[parameters('location')]",
         "apiVersion":"2020-04-01-preview",
         "tags":{
            "resourceType":"MHSM",
            "Environment":"PROD"
         },
         "Sku":"[parameters('SKU')]",
         "properties":{
            "EnableSoftDelete":true,
            "SoftDeleteRetentionInDays":90,
            "EnablePurgeProtection":false,
            "TenantId":"[parameters('tenantId')]",
            "InitialAdminObjectIds":"[parameters('initialAdminObjectIds')]"
         }
      }
   ]
}