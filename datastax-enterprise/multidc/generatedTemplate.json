{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#", 
    "contentVersion": "1.0.0.0", 
    "outputs": {
        "opsCenterURL": {
            "type": "string", 
            "value": "[concat('http://opscenter', variables('uniqueString'), '.', resourceGroup().location, '.cloudapp.azure.com:8888')]"
        }
    }, 
    "parameters": {}, 
    "resources": [
        {
            "apiVersion": "2015-06-15", 
            "location": "eastus", 
            "name": "dc0", 
            "properties": {
                "platformFaultDomainCount": 3, 
                "platformUpdateDomainCount": 18
            }, 
            "type": "Microsoft.Compute/availabilitySets"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "eastus", 
            "name": "dc0", 
            "properties": {
                "addressSpace": {
                    "addressPrefixes": [
                        "10.0.0.0/16"
                    ]
                }, 
                "subnets": [
                    {
                        "name": "subnet", 
                        "properties": {
                            "addressPrefix": "10.0.0.0/24"
                        }
                    }
                ]
            }, 
            "type": "Microsoft.Network/virtualNetworks"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "eastus", 
            "name": "dc0vm0", 
            "properties": {
                "dnsSettings": {
                    "domainNameLabel": "[concat('dc0vm0', variables('uniqueString'))]"
                }, 
                "publicIPAllocationMethod": "Dynamic"
            }, 
            "type": "Microsoft.Network/publicIPAddresses"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Network/virtualNetworks/dc0", 
                "Microsoft.Network/publicIPAddresses/dc0vm0"
            ], 
            "location": "eastus", 
            "name": "dc0vm0", 
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipConfig", 
                        "properties": {
                            "privateIPAllocationMethod": "Dynamic", 
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses','dc0vm0')]"
                            }, 
                            "subnet": {
                                "id": "[concat(resourceId('Microsoft.Network/virtualNetworks', 'dc0'), '/subnets/subnet')]"
                            }
                        }
                    }
                ]
            }, 
            "type": "Microsoft.Network/networkInterfaces"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "eastus", 
            "name": "[concat('dc0sa0', variables('uniqueString'))]", 
            "properties": {
                "accountType": "Standard_LRS"
            }, 
            "type": "Microsoft.Storage/storageAccounts"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/availabilitySets/dc0", 
                "Microsoft.Network/networkInterfaces/dc0vm0", 
                "[concat('Microsoft.Storage/storageAccounts/dc0sa0', variables('uniqueString'))]"
            ], 
            "location": "eastus", 
            "name": "dc0vm0", 
            "properties": {
                "availabilitySet": {
                    "id": "[resourceId('Microsoft.Compute/availabilitySets', 'dc0')]"
                }, 
                "hardwareProfile": {
                    "vmSize": "Standard_D2_v2"
                }, 
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces','dc0vm0')]"
                        }
                    ]
                }, 
                "osProfile": {
                    "adminPassword": "foo123!", 
                    "adminUsername": "datastax", 
                    "computername": "dc0vm0"
                }, 
                "storageProfile": {
                    "imageReference": {
                        "offer": "UbuntuServer", 
                        "publisher": "Canonical", 
                        "sku": "14.04.4-LTS", 
                        "version": "latest"
                    }, 
                    "osDisk": {
                        "caching": "ReadWrite", 
                        "createOption": "FromImage", 
                        "name": "osdisk", 
                        "vhd": {
                            "uri": "[concat('http://dc0sa0', variables('uniqueString'), '.blob.core.windows.net/vhds/dc0vm0-osdisk.vhd')]"
                        }
                    }
                }
            }, 
            "type": "Microsoft.Compute/virtualMachines"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/virtualMachines/dc0vm0"
            ], 
            "location": "eastus", 
            "name": "dc0vm0/installdsenode", 
            "properties": {
                "autoUpgradeMinorVersion": true, 
                "publisher": "Microsoft.OSTCExtensions", 
                "settings": {
                    "commandToExecute": "[concat('bash node.sh eastus ', variables('uniqueString'), ' dc0-eastus')]", 
                    "fileUris": [
                        "https://raw.githubusercontent.com/DSPN/azure-resource-manager-dse/master/extensions/node.sh"
                    ]
                }, 
                "type": "CustomScriptForLinux", 
                "typeHandlerVersion": "1.4"
            }, 
            "type": "Microsoft.Compute/virtualMachines/extensions"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "eastus", 
            "name": "dc0vm1", 
            "properties": {
                "dnsSettings": {
                    "domainNameLabel": "[concat('dc0vm1', variables('uniqueString'))]"
                }, 
                "publicIPAllocationMethod": "Dynamic"
            }, 
            "type": "Microsoft.Network/publicIPAddresses"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Network/virtualNetworks/dc0", 
                "Microsoft.Network/publicIPAddresses/dc0vm1"
            ], 
            "location": "eastus", 
            "name": "dc0vm1", 
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipConfig", 
                        "properties": {
                            "privateIPAllocationMethod": "Dynamic", 
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses','dc0vm1')]"
                            }, 
                            "subnet": {
                                "id": "[concat(resourceId('Microsoft.Network/virtualNetworks', 'dc0'), '/subnets/subnet')]"
                            }
                        }
                    }
                ]
            }, 
            "type": "Microsoft.Network/networkInterfaces"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/availabilitySets/dc0", 
                "Microsoft.Network/networkInterfaces/dc0vm1", 
                "[concat('Microsoft.Storage/storageAccounts/dc0sa0', variables('uniqueString'))]"
            ], 
            "location": "eastus", 
            "name": "dc0vm1", 
            "properties": {
                "availabilitySet": {
                    "id": "[resourceId('Microsoft.Compute/availabilitySets', 'dc0')]"
                }, 
                "hardwareProfile": {
                    "vmSize": "Standard_D2_v2"
                }, 
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces','dc0vm1')]"
                        }
                    ]
                }, 
                "osProfile": {
                    "adminPassword": "foo123!", 
                    "adminUsername": "datastax", 
                    "computername": "dc0vm1"
                }, 
                "storageProfile": {
                    "imageReference": {
                        "offer": "UbuntuServer", 
                        "publisher": "Canonical", 
                        "sku": "14.04.4-LTS", 
                        "version": "latest"
                    }, 
                    "osDisk": {
                        "caching": "ReadWrite", 
                        "createOption": "FromImage", 
                        "name": "osdisk", 
                        "vhd": {
                            "uri": "[concat('http://dc0sa0', variables('uniqueString'), '.blob.core.windows.net/vhds/dc0vm1-osdisk.vhd')]"
                        }
                    }
                }
            }, 
            "type": "Microsoft.Compute/virtualMachines"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/virtualMachines/dc0vm1"
            ], 
            "location": "eastus", 
            "name": "dc0vm1/installdsenode", 
            "properties": {
                "autoUpgradeMinorVersion": true, 
                "publisher": "Microsoft.OSTCExtensions", 
                "settings": {
                    "commandToExecute": "[concat('bash node.sh eastus ', variables('uniqueString'), ' dc0-eastus')]", 
                    "fileUris": [
                        "https://raw.githubusercontent.com/DSPN/azure-resource-manager-dse/master/extensions/node.sh"
                    ]
                }, 
                "type": "CustomScriptForLinux", 
                "typeHandlerVersion": "1.4"
            }, 
            "type": "Microsoft.Compute/virtualMachines/extensions"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "eastus", 
            "name": "dc0vm2", 
            "properties": {
                "dnsSettings": {
                    "domainNameLabel": "[concat('dc0vm2', variables('uniqueString'))]"
                }, 
                "publicIPAllocationMethod": "Dynamic"
            }, 
            "type": "Microsoft.Network/publicIPAddresses"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Network/virtualNetworks/dc0", 
                "Microsoft.Network/publicIPAddresses/dc0vm2"
            ], 
            "location": "eastus", 
            "name": "dc0vm2", 
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipConfig", 
                        "properties": {
                            "privateIPAllocationMethod": "Dynamic", 
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses','dc0vm2')]"
                            }, 
                            "subnet": {
                                "id": "[concat(resourceId('Microsoft.Network/virtualNetworks', 'dc0'), '/subnets/subnet')]"
                            }
                        }
                    }
                ]
            }, 
            "type": "Microsoft.Network/networkInterfaces"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/availabilitySets/dc0", 
                "Microsoft.Network/networkInterfaces/dc0vm2", 
                "[concat('Microsoft.Storage/storageAccounts/dc0sa0', variables('uniqueString'))]"
            ], 
            "location": "eastus", 
            "name": "dc0vm2", 
            "properties": {
                "availabilitySet": {
                    "id": "[resourceId('Microsoft.Compute/availabilitySets', 'dc0')]"
                }, 
                "hardwareProfile": {
                    "vmSize": "Standard_D2_v2"
                }, 
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces','dc0vm2')]"
                        }
                    ]
                }, 
                "osProfile": {
                    "adminPassword": "foo123!", 
                    "adminUsername": "datastax", 
                    "computername": "dc0vm2"
                }, 
                "storageProfile": {
                    "imageReference": {
                        "offer": "UbuntuServer", 
                        "publisher": "Canonical", 
                        "sku": "14.04.4-LTS", 
                        "version": "latest"
                    }, 
                    "osDisk": {
                        "caching": "ReadWrite", 
                        "createOption": "FromImage", 
                        "name": "osdisk", 
                        "vhd": {
                            "uri": "[concat('http://dc0sa0', variables('uniqueString'), '.blob.core.windows.net/vhds/dc0vm2-osdisk.vhd')]"
                        }
                    }
                }
            }, 
            "type": "Microsoft.Compute/virtualMachines"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/virtualMachines/dc0vm2"
            ], 
            "location": "eastus", 
            "name": "dc0vm2/installdsenode", 
            "properties": {
                "autoUpgradeMinorVersion": true, 
                "publisher": "Microsoft.OSTCExtensions", 
                "settings": {
                    "commandToExecute": "[concat('bash node.sh eastus ', variables('uniqueString'), ' dc0-eastus')]", 
                    "fileUris": [
                        "https://raw.githubusercontent.com/DSPN/azure-resource-manager-dse/master/extensions/node.sh"
                    ]
                }, 
                "type": "CustomScriptForLinux", 
                "typeHandlerVersion": "1.4"
            }, 
            "type": "Microsoft.Compute/virtualMachines/extensions"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "centralus", 
            "name": "dc1", 
            "properties": {
                "platformFaultDomainCount": 3, 
                "platformUpdateDomainCount": 18
            }, 
            "type": "Microsoft.Compute/availabilitySets"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "centralus", 
            "name": "dc1", 
            "properties": {
                "addressSpace": {
                    "addressPrefixes": [
                        "10.1.0.0/16"
                    ]
                }, 
                "subnets": [
                    {
                        "name": "subnet", 
                        "properties": {
                            "addressPrefix": "10.1.0.0/24"
                        }
                    }
                ]
            }, 
            "type": "Microsoft.Network/virtualNetworks"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "centralus", 
            "name": "dc1vm0", 
            "properties": {
                "dnsSettings": {
                    "domainNameLabel": "[concat('dc1vm0', variables('uniqueString'))]"
                }, 
                "publicIPAllocationMethod": "Dynamic"
            }, 
            "type": "Microsoft.Network/publicIPAddresses"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Network/virtualNetworks/dc1", 
                "Microsoft.Network/publicIPAddresses/dc1vm0"
            ], 
            "location": "centralus", 
            "name": "dc1vm0", 
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipConfig", 
                        "properties": {
                            "privateIPAllocationMethod": "Dynamic", 
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses','dc1vm0')]"
                            }, 
                            "subnet": {
                                "id": "[concat(resourceId('Microsoft.Network/virtualNetworks', 'dc1'), '/subnets/subnet')]"
                            }
                        }
                    }
                ]
            }, 
            "type": "Microsoft.Network/networkInterfaces"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "centralus", 
            "name": "[concat('dc1sa0', variables('uniqueString'))]", 
            "properties": {
                "accountType": "Standard_LRS"
            }, 
            "type": "Microsoft.Storage/storageAccounts"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/availabilitySets/dc1", 
                "Microsoft.Network/networkInterfaces/dc1vm0", 
                "[concat('Microsoft.Storage/storageAccounts/dc1sa0', variables('uniqueString'))]"
            ], 
            "location": "centralus", 
            "name": "dc1vm0", 
            "properties": {
                "availabilitySet": {
                    "id": "[resourceId('Microsoft.Compute/availabilitySets', 'dc1')]"
                }, 
                "hardwareProfile": {
                    "vmSize": "Standard_D2_v2"
                }, 
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces','dc1vm0')]"
                        }
                    ]
                }, 
                "osProfile": {
                    "adminPassword": "foo123!", 
                    "adminUsername": "datastax", 
                    "computername": "dc1vm0"
                }, 
                "storageProfile": {
                    "imageReference": {
                        "offer": "UbuntuServer", 
                        "publisher": "Canonical", 
                        "sku": "14.04.4-LTS", 
                        "version": "latest"
                    }, 
                    "osDisk": {
                        "caching": "ReadWrite", 
                        "createOption": "FromImage", 
                        "name": "osdisk", 
                        "vhd": {
                            "uri": "[concat('http://dc1sa0', variables('uniqueString'), '.blob.core.windows.net/vhds/dc1vm0-osdisk.vhd')]"
                        }
                    }
                }
            }, 
            "type": "Microsoft.Compute/virtualMachines"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/virtualMachines/dc1vm0"
            ], 
            "location": "centralus", 
            "name": "dc1vm0/installdsenode", 
            "properties": {
                "autoUpgradeMinorVersion": true, 
                "publisher": "Microsoft.OSTCExtensions", 
                "settings": {
                    "commandToExecute": "[concat('bash node.sh eastus ', variables('uniqueString'), ' dc1-centralus')]", 
                    "fileUris": [
                        "https://raw.githubusercontent.com/DSPN/azure-resource-manager-dse/master/extensions/node.sh"
                    ]
                }, 
                "type": "CustomScriptForLinux", 
                "typeHandlerVersion": "1.4"
            }, 
            "type": "Microsoft.Compute/virtualMachines/extensions"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "centralus", 
            "name": "dc1vm1", 
            "properties": {
                "dnsSettings": {
                    "domainNameLabel": "[concat('dc1vm1', variables('uniqueString'))]"
                }, 
                "publicIPAllocationMethod": "Dynamic"
            }, 
            "type": "Microsoft.Network/publicIPAddresses"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Network/virtualNetworks/dc1", 
                "Microsoft.Network/publicIPAddresses/dc1vm1"
            ], 
            "location": "centralus", 
            "name": "dc1vm1", 
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipConfig", 
                        "properties": {
                            "privateIPAllocationMethod": "Dynamic", 
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses','dc1vm1')]"
                            }, 
                            "subnet": {
                                "id": "[concat(resourceId('Microsoft.Network/virtualNetworks', 'dc1'), '/subnets/subnet')]"
                            }
                        }
                    }
                ]
            }, 
            "type": "Microsoft.Network/networkInterfaces"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/availabilitySets/dc1", 
                "Microsoft.Network/networkInterfaces/dc1vm1", 
                "[concat('Microsoft.Storage/storageAccounts/dc1sa0', variables('uniqueString'))]"
            ], 
            "location": "centralus", 
            "name": "dc1vm1", 
            "properties": {
                "availabilitySet": {
                    "id": "[resourceId('Microsoft.Compute/availabilitySets', 'dc1')]"
                }, 
                "hardwareProfile": {
                    "vmSize": "Standard_D2_v2"
                }, 
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces','dc1vm1')]"
                        }
                    ]
                }, 
                "osProfile": {
                    "adminPassword": "foo123!", 
                    "adminUsername": "datastax", 
                    "computername": "dc1vm1"
                }, 
                "storageProfile": {
                    "imageReference": {
                        "offer": "UbuntuServer", 
                        "publisher": "Canonical", 
                        "sku": "14.04.4-LTS", 
                        "version": "latest"
                    }, 
                    "osDisk": {
                        "caching": "ReadWrite", 
                        "createOption": "FromImage", 
                        "name": "osdisk", 
                        "vhd": {
                            "uri": "[concat('http://dc1sa0', variables('uniqueString'), '.blob.core.windows.net/vhds/dc1vm1-osdisk.vhd')]"
                        }
                    }
                }
            }, 
            "type": "Microsoft.Compute/virtualMachines"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/virtualMachines/dc1vm1"
            ], 
            "location": "centralus", 
            "name": "dc1vm1/installdsenode", 
            "properties": {
                "autoUpgradeMinorVersion": true, 
                "publisher": "Microsoft.OSTCExtensions", 
                "settings": {
                    "commandToExecute": "[concat('bash node.sh eastus ', variables('uniqueString'), ' dc1-centralus')]", 
                    "fileUris": [
                        "https://raw.githubusercontent.com/DSPN/azure-resource-manager-dse/master/extensions/node.sh"
                    ]
                }, 
                "type": "CustomScriptForLinux", 
                "typeHandlerVersion": "1.4"
            }, 
            "type": "Microsoft.Compute/virtualMachines/extensions"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "centralus", 
            "name": "dc1vm2", 
            "properties": {
                "dnsSettings": {
                    "domainNameLabel": "[concat('dc1vm2', variables('uniqueString'))]"
                }, 
                "publicIPAllocationMethod": "Dynamic"
            }, 
            "type": "Microsoft.Network/publicIPAddresses"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Network/virtualNetworks/dc1", 
                "Microsoft.Network/publicIPAddresses/dc1vm2"
            ], 
            "location": "centralus", 
            "name": "dc1vm2", 
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipConfig", 
                        "properties": {
                            "privateIPAllocationMethod": "Dynamic", 
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses','dc1vm2')]"
                            }, 
                            "subnet": {
                                "id": "[concat(resourceId('Microsoft.Network/virtualNetworks', 'dc1'), '/subnets/subnet')]"
                            }
                        }
                    }
                ]
            }, 
            "type": "Microsoft.Network/networkInterfaces"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/availabilitySets/dc1", 
                "Microsoft.Network/networkInterfaces/dc1vm2", 
                "[concat('Microsoft.Storage/storageAccounts/dc1sa0', variables('uniqueString'))]"
            ], 
            "location": "centralus", 
            "name": "dc1vm2", 
            "properties": {
                "availabilitySet": {
                    "id": "[resourceId('Microsoft.Compute/availabilitySets', 'dc1')]"
                }, 
                "hardwareProfile": {
                    "vmSize": "Standard_D2_v2"
                }, 
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces','dc1vm2')]"
                        }
                    ]
                }, 
                "osProfile": {
                    "adminPassword": "foo123!", 
                    "adminUsername": "datastax", 
                    "computername": "dc1vm2"
                }, 
                "storageProfile": {
                    "imageReference": {
                        "offer": "UbuntuServer", 
                        "publisher": "Canonical", 
                        "sku": "14.04.4-LTS", 
                        "version": "latest"
                    }, 
                    "osDisk": {
                        "caching": "ReadWrite", 
                        "createOption": "FromImage", 
                        "name": "osdisk", 
                        "vhd": {
                            "uri": "[concat('http://dc1sa0', variables('uniqueString'), '.blob.core.windows.net/vhds/dc1vm2-osdisk.vhd')]"
                        }
                    }
                }
            }, 
            "type": "Microsoft.Compute/virtualMachines"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/virtualMachines/dc1vm2"
            ], 
            "location": "centralus", 
            "name": "dc1vm2/installdsenode", 
            "properties": {
                "autoUpgradeMinorVersion": true, 
                "publisher": "Microsoft.OSTCExtensions", 
                "settings": {
                    "commandToExecute": "[concat('bash node.sh eastus ', variables('uniqueString'), ' dc1-centralus')]", 
                    "fileUris": [
                        "https://raw.githubusercontent.com/DSPN/azure-resource-manager-dse/master/extensions/node.sh"
                    ]
                }, 
                "type": "CustomScriptForLinux", 
                "typeHandlerVersion": "1.4"
            }, 
            "type": "Microsoft.Compute/virtualMachines/extensions"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "westus", 
            "name": "dc2", 
            "properties": {
                "platformFaultDomainCount": 3, 
                "platformUpdateDomainCount": 18
            }, 
            "type": "Microsoft.Compute/availabilitySets"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "westus", 
            "name": "dc2", 
            "properties": {
                "addressSpace": {
                    "addressPrefixes": [
                        "10.2.0.0/16"
                    ]
                }, 
                "subnets": [
                    {
                        "name": "subnet", 
                        "properties": {
                            "addressPrefix": "10.2.0.0/24"
                        }
                    }
                ]
            }, 
            "type": "Microsoft.Network/virtualNetworks"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "westus", 
            "name": "dc2vm0", 
            "properties": {
                "dnsSettings": {
                    "domainNameLabel": "[concat('dc2vm0', variables('uniqueString'))]"
                }, 
                "publicIPAllocationMethod": "Dynamic"
            }, 
            "type": "Microsoft.Network/publicIPAddresses"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Network/virtualNetworks/dc2", 
                "Microsoft.Network/publicIPAddresses/dc2vm0"
            ], 
            "location": "westus", 
            "name": "dc2vm0", 
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipConfig", 
                        "properties": {
                            "privateIPAllocationMethod": "Dynamic", 
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses','dc2vm0')]"
                            }, 
                            "subnet": {
                                "id": "[concat(resourceId('Microsoft.Network/virtualNetworks', 'dc2'), '/subnets/subnet')]"
                            }
                        }
                    }
                ]
            }, 
            "type": "Microsoft.Network/networkInterfaces"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "westus", 
            "name": "[concat('dc2sa0', variables('uniqueString'))]", 
            "properties": {
                "accountType": "Standard_LRS"
            }, 
            "type": "Microsoft.Storage/storageAccounts"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/availabilitySets/dc2", 
                "Microsoft.Network/networkInterfaces/dc2vm0", 
                "[concat('Microsoft.Storage/storageAccounts/dc2sa0', variables('uniqueString'))]"
            ], 
            "location": "westus", 
            "name": "dc2vm0", 
            "properties": {
                "availabilitySet": {
                    "id": "[resourceId('Microsoft.Compute/availabilitySets', 'dc2')]"
                }, 
                "hardwareProfile": {
                    "vmSize": "Standard_D2_v2"
                }, 
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces','dc2vm0')]"
                        }
                    ]
                }, 
                "osProfile": {
                    "adminPassword": "foo123!", 
                    "adminUsername": "datastax", 
                    "computername": "dc2vm0"
                }, 
                "storageProfile": {
                    "imageReference": {
                        "offer": "UbuntuServer", 
                        "publisher": "Canonical", 
                        "sku": "14.04.4-LTS", 
                        "version": "latest"
                    }, 
                    "osDisk": {
                        "caching": "ReadWrite", 
                        "createOption": "FromImage", 
                        "name": "osdisk", 
                        "vhd": {
                            "uri": "[concat('http://dc2sa0', variables('uniqueString'), '.blob.core.windows.net/vhds/dc2vm0-osdisk.vhd')]"
                        }
                    }
                }
            }, 
            "type": "Microsoft.Compute/virtualMachines"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/virtualMachines/dc2vm0"
            ], 
            "location": "westus", 
            "name": "dc2vm0/installdsenode", 
            "properties": {
                "autoUpgradeMinorVersion": true, 
                "publisher": "Microsoft.OSTCExtensions", 
                "settings": {
                    "commandToExecute": "[concat('bash node.sh eastus ', variables('uniqueString'), ' dc2-westus')]", 
                    "fileUris": [
                        "https://raw.githubusercontent.com/DSPN/azure-resource-manager-dse/master/extensions/node.sh"
                    ]
                }, 
                "type": "CustomScriptForLinux", 
                "typeHandlerVersion": "1.4"
            }, 
            "type": "Microsoft.Compute/virtualMachines/extensions"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "westus", 
            "name": "dc2vm1", 
            "properties": {
                "dnsSettings": {
                    "domainNameLabel": "[concat('dc2vm1', variables('uniqueString'))]"
                }, 
                "publicIPAllocationMethod": "Dynamic"
            }, 
            "type": "Microsoft.Network/publicIPAddresses"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Network/virtualNetworks/dc2", 
                "Microsoft.Network/publicIPAddresses/dc2vm1"
            ], 
            "location": "westus", 
            "name": "dc2vm1", 
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipConfig", 
                        "properties": {
                            "privateIPAllocationMethod": "Dynamic", 
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses','dc2vm1')]"
                            }, 
                            "subnet": {
                                "id": "[concat(resourceId('Microsoft.Network/virtualNetworks', 'dc2'), '/subnets/subnet')]"
                            }
                        }
                    }
                ]
            }, 
            "type": "Microsoft.Network/networkInterfaces"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/availabilitySets/dc2", 
                "Microsoft.Network/networkInterfaces/dc2vm1", 
                "[concat('Microsoft.Storage/storageAccounts/dc2sa0', variables('uniqueString'))]"
            ], 
            "location": "westus", 
            "name": "dc2vm1", 
            "properties": {
                "availabilitySet": {
                    "id": "[resourceId('Microsoft.Compute/availabilitySets', 'dc2')]"
                }, 
                "hardwareProfile": {
                    "vmSize": "Standard_D2_v2"
                }, 
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces','dc2vm1')]"
                        }
                    ]
                }, 
                "osProfile": {
                    "adminPassword": "foo123!", 
                    "adminUsername": "datastax", 
                    "computername": "dc2vm1"
                }, 
                "storageProfile": {
                    "imageReference": {
                        "offer": "UbuntuServer", 
                        "publisher": "Canonical", 
                        "sku": "14.04.4-LTS", 
                        "version": "latest"
                    }, 
                    "osDisk": {
                        "caching": "ReadWrite", 
                        "createOption": "FromImage", 
                        "name": "osdisk", 
                        "vhd": {
                            "uri": "[concat('http://dc2sa0', variables('uniqueString'), '.blob.core.windows.net/vhds/dc2vm1-osdisk.vhd')]"
                        }
                    }
                }
            }, 
            "type": "Microsoft.Compute/virtualMachines"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/virtualMachines/dc2vm1"
            ], 
            "location": "westus", 
            "name": "dc2vm1/installdsenode", 
            "properties": {
                "autoUpgradeMinorVersion": true, 
                "publisher": "Microsoft.OSTCExtensions", 
                "settings": {
                    "commandToExecute": "[concat('bash node.sh eastus ', variables('uniqueString'), ' dc2-westus')]", 
                    "fileUris": [
                        "https://raw.githubusercontent.com/DSPN/azure-resource-manager-dse/master/extensions/node.sh"
                    ]
                }, 
                "type": "CustomScriptForLinux", 
                "typeHandlerVersion": "1.4"
            }, 
            "type": "Microsoft.Compute/virtualMachines/extensions"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "westus", 
            "name": "dc2vm2", 
            "properties": {
                "dnsSettings": {
                    "domainNameLabel": "[concat('dc2vm2', variables('uniqueString'))]"
                }, 
                "publicIPAllocationMethod": "Dynamic"
            }, 
            "type": "Microsoft.Network/publicIPAddresses"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Network/virtualNetworks/dc2", 
                "Microsoft.Network/publicIPAddresses/dc2vm2"
            ], 
            "location": "westus", 
            "name": "dc2vm2", 
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipConfig", 
                        "properties": {
                            "privateIPAllocationMethod": "Dynamic", 
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses','dc2vm2')]"
                            }, 
                            "subnet": {
                                "id": "[concat(resourceId('Microsoft.Network/virtualNetworks', 'dc2'), '/subnets/subnet')]"
                            }
                        }
                    }
                ]
            }, 
            "type": "Microsoft.Network/networkInterfaces"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/availabilitySets/dc2", 
                "Microsoft.Network/networkInterfaces/dc2vm2", 
                "[concat('Microsoft.Storage/storageAccounts/dc2sa0', variables('uniqueString'))]"
            ], 
            "location": "westus", 
            "name": "dc2vm2", 
            "properties": {
                "availabilitySet": {
                    "id": "[resourceId('Microsoft.Compute/availabilitySets', 'dc2')]"
                }, 
                "hardwareProfile": {
                    "vmSize": "Standard_D2_v2"
                }, 
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces','dc2vm2')]"
                        }
                    ]
                }, 
                "osProfile": {
                    "adminPassword": "foo123!", 
                    "adminUsername": "datastax", 
                    "computername": "dc2vm2"
                }, 
                "storageProfile": {
                    "imageReference": {
                        "offer": "UbuntuServer", 
                        "publisher": "Canonical", 
                        "sku": "14.04.4-LTS", 
                        "version": "latest"
                    }, 
                    "osDisk": {
                        "caching": "ReadWrite", 
                        "createOption": "FromImage", 
                        "name": "osdisk", 
                        "vhd": {
                            "uri": "[concat('http://dc2sa0', variables('uniqueString'), '.blob.core.windows.net/vhds/dc2vm2-osdisk.vhd')]"
                        }
                    }
                }
            }, 
            "type": "Microsoft.Compute/virtualMachines"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/virtualMachines/dc2vm2"
            ], 
            "location": "westus", 
            "name": "dc2vm2/installdsenode", 
            "properties": {
                "autoUpgradeMinorVersion": true, 
                "publisher": "Microsoft.OSTCExtensions", 
                "settings": {
                    "commandToExecute": "[concat('bash node.sh eastus ', variables('uniqueString'), ' dc2-westus')]", 
                    "fileUris": [
                        "https://raw.githubusercontent.com/DSPN/azure-resource-manager-dse/master/extensions/node.sh"
                    ]
                }, 
                "type": "CustomScriptForLinux", 
                "typeHandlerVersion": "1.4"
            }, 
            "type": "Microsoft.Compute/virtualMachines/extensions"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "[resourceGroup().location]", 
            "name": "opscenter", 
            "properties": {
                "addressSpace": {
                    "addressPrefixes": [
                        "10.0.0.0/16"
                    ]
                }, 
                "subnets": [
                    {
                        "name": "subnet", 
                        "properties": {
                            "addressPrefix": "10.0.1.0/24"
                        }
                    }
                ]
            }, 
            "type": "Microsoft.Network/virtualNetworks"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "[resourceGroup().location]", 
            "name": "opscenter", 
            "properties": {
                "dnsSettings": {
                    "domainNameLabel": "[concat('opscenter', variables('uniqueString'))]"
                }, 
                "publicIPAllocationMethod": "Dynamic"
            }, 
            "type": "Microsoft.Network/publicIPAddresses"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Network/virtualNetworks/opscenter", 
                "Microsoft.Network/publicIPAddresses/opscenter"
            ], 
            "location": "[resourceGroup().location]", 
            "name": "opscenter", 
            "properties": {
                "ipConfigurations": [
                    {
                        "name": "ipConfig", 
                        "properties": {
                            "privateIPAllocationMethod": "Dynamic", 
                            "publicIPAddress": {
                                "id": "[resourceId('Microsoft.Network/publicIPAddresses','opscenter')]"
                            }, 
                            "subnet": {
                                "id": "[concat(resourceId('Microsoft.Network/virtualNetworks', 'opscenter'), '/subnets/subnet')]"
                            }
                        }
                    }
                ]
            }, 
            "type": "Microsoft.Network/networkInterfaces"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "location": "[resourceGroup().location]", 
            "name": "[concat('opscenter', variables('uniqueString'))]", 
            "properties": {
                "accountType": "Standard_LRS"
            }, 
            "type": "Microsoft.Storage/storageAccounts"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Network/networkInterfaces/opscenter", 
                "[concat('Microsoft.Storage/storageAccounts/opscenter', variables('uniqueString'))]"
            ], 
            "location": "[resourceGroup().location]", 
            "name": "opscenter", 
            "properties": {
                "hardwareProfile": {
                    "vmSize": "Standard_A1"
                }, 
                "networkProfile": {
                    "networkInterfaces": [
                        {
                            "id": "[resourceId('Microsoft.Network/networkInterfaces','opscenter')]"
                        }
                    ]
                }, 
                "osProfile": {
                    "adminPassword": "foo123!", 
                    "adminUsername": "datastax", 
                    "computername": "opscenter"
                }, 
                "storageProfile": {
                    "imageReference": {
                        "offer": "UbuntuServer", 
                        "publisher": "Canonical", 
                        "sku": "14.04.4-LTS", 
                        "version": "latest"
                    }, 
                    "osDisk": {
                        "caching": "ReadWrite", 
                        "createOption": "FromImage", 
                        "name": "osdisk", 
                        "vhd": {
                            "uri": "[concat('http://opscenter', variables('uniqueString'), '.blob.core.windows.net/vhds/opscenter-osdisk.vhd')]"
                        }
                    }
                }
            }, 
            "type": "Microsoft.Compute/virtualMachines"
        }, 
        {
            "apiVersion": "2015-06-15", 
            "dependsOn": [
                "Microsoft.Compute/virtualMachines/opscenter"
            ], 
            "location": "[resourceGroup().location]", 
            "name": "opscenter/installopscenter", 
            "properties": {
                "autoUpgradeMinorVersion": true, 
                "publisher": "Microsoft.OSTCExtensions", 
                "settings": {
                    "commandToExecute": "[concat('bash opsCenter.sh eastus ', variables('uniqueString'))]", 
                    "fileUris": [
                        "https://raw.githubusercontent.com/DSPN/azure-resource-manager-dse/master/extensions/opsCenter.sh"
                    ]
                }, 
                "type": "CustomScriptForLinux", 
                "typeHandlerVersion": "1.3"
            }, 
            "type": "Microsoft.Compute/virtualMachines/extensions"
        }
    ], 
    "variables": {
        "uniqueString": "[uniqueString(resourceGroup().id, deployment().name)]"
    }
}