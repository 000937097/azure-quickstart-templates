{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "queryName": {
            "value": "Count VMs by OS"
        },
        "queryCode": {
            "value": "Resources | where type =~ 'Microsoft.Compute/virtualMachines' | summarize count() by tostring(properties.storageProfile.osDisk.osType)"
        },
        "queryDescription": {
            "value": "This shared query counts all virtual machine resources and summarizes by the OS type."
        }
    }
}