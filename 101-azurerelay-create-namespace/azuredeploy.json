{
   "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
   "contentVersion": "1.0.0.0",
   "parameters": { 
		"name": {
				"type": "string",
				"metadata": {
					"description": "Name of the Azure Relay namespace"
				}
		},
		"apiVersion": {
            "type": "string",
            "defaultValue": "2016-07-01",
            "metadata": {
                "description": "ApiVersion used by the template"
            }
        }
   },
   "variables": { 
		"location": "[resourceGroup().location]",
		"defaultSASKeyName": "RootManageSharedAccessKey",
		"defaultAuthRuleResourceId": "[resourceId('Microsoft.Relay/namespaces/authorizationRules', parameters('name'), variables('defaultSASKeyName'))]"    
   },
   "resources": [{
		"apiVersion": "[parameters('apiVersion')]",
		"name": "[parameters('name')]",
		"type": "Microsoft.Relay/Namespaces",
		"location": "[variables('location')]",		
		"kind": "Relay",		
		"properties": {			
		}
	}],
   "outputs": {
		"NamespaceDefaultConnectionString": {
            "type": "string",
            "value": "[listkeys(variables('defaultAuthRuleResourceId'), parameters('apiVersion')).primaryConnectionString]"
        },
		"DefaultSharedAccessPolicyPrimaryKey": {
            "type": "string",
            "value": "[listkeys(variables('defaultAuthRuleResourceId'), parameters('apiVersion')).primaryKey]"
        }
	}
}